#include <bits/stdc++.h>
using namespace std;
//https://usaco.guide/gold/dp-ranges?lang=cpp#solution---space-jazz
#define int long long
const int nm = 1e6 + 9;
const int N = 1e3 + 9;
const int MOD = 1e9 + 7;
const int LOG = 23;
const int INF = 2e9;
#define el '\n'
#define pii pair<int,int>
int n,a[N],dp[N][N],rs; 
void maximize(int &x, int y){
	if (x < y) x = y; 
}
signed main (){
	freopen ("248.in","r",stdin); 
	freopen ("248.out","w",stdout);
	ios_base::sync_with_stdio(false);
	cin.tie(NULL); cout.tie(NULL);
	cin >> n; 
	for (int i = 1; i <= n; i++){
		cin >> a[i]; dp[i][i] = a[i]; 
	}
	for (int len = 2; len <= n; len++){
		for (int i = 1; i <= n - len + 1; i++){
			int j = i + len - 1; 
			for (int k = i; k <= j; k++){
				if (dp[i][k] == dp[k+1][j]) maximize(dp[i][j],dp[i][k]+1); 
			}
			if (dp[i][j] == 0) dp[i][j] = -1;
			rs = max(rs,dp[i][j]);
		}
	}
	cout << rs; 
	return 0;
}
